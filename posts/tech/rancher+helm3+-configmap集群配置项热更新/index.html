<!doctype html><html lang=zh dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Rancher+Helm3 + ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–° | GopherDing's Blog</title><meta name=keywords content><meta name=description content="å®ç°Rancher+Helm3 + ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–°çš„æ–¹å¼è¯¦è§£"><meta name=author content="GopherDing"><link rel=canonical href=https://gopherding.github.io/posts/tech/rancher+helm3+-configmap%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%83%AD%E6%9B%B4%E6%96%B0/><link crossorigin=anonymous href=/assets/css/stylesheet.css rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.js onload=hljs.initHighlightingOnLoad()></script><link rel=icon href=https://gopherding.github.io/img/GopherSpaceCommunity.png><link rel=icon type=image/png sizes=16x16 href=https://gopherding.github.io/img/GopherSpaceCommunity.png><link rel=icon type=image/png sizes=32x32 href=https://gopherding.github.io/img/GopherSpaceCommunity.png><link rel=apple-touch-icon href=https://gopherding.github.io/img/GopherSpaceCommunity.png><link rel=mask-icon href=https://gopherding.github.io/img/GopherSpaceCommunity.png><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><meta name=google-site-verification content="7XaJy5jt6ZoEXT-jlbI3sDg79M-BnIkGtU7WZLCQkzg"><link rel=alternate hreflang=zh href=https://gopherding.github.io/posts/tech/rancher+helm3+-configmap%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%83%AD%E6%9B%B4%E6%96%B0/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script src=/js/busuanzi.pure.mini.js></script><link rel=stylesheet href=/css/font-awesome.min.css><script src=/js/jquery-3.7.1.min.js></script><meta property="og:title" content="Rancher+Helm3 + ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–°"><meta property="og:description" content="å®ç°Rancher+Helm3 + ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–°çš„æ–¹å¼è¯¦è§£"><meta property="og:type" content="article"><meta property="og:url" content="https://gopherding.github.io/posts/tech/rancher+helm3+-configmap%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%83%AD%E6%9B%B4%E6%96%B0/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-26T15:55:23+08:00"><meta property="article:modified_time" content="2024-01-26T15:55:23+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Rancher+Helm3 + ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–°"><meta name=twitter:description content="å®ç°Rancher+Helm3 + ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–°çš„æ–¹å¼è¯¦è§£"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"ğŸ“šæ–‡ç« ","item":"https://gopherding.github.io/posts/"},{"@type":"ListItem","position":2,"name":"ğŸ‘¨ğŸ»â€ğŸ’» æŠ€æœ¯","item":"https://gopherding.github.io/posts/tech/"},{"@type":"ListItem","position":3,"name":"Rancher+Helm3 + ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–°","item":"https://gopherding.github.io/posts/tech/rancher+helm3+-configmap%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%83%AD%E6%9B%B4%E6%96%B0/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Rancher+Helm3 + ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–°","name":"Rancher\u002bHelm3 \u002b ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–°","description":"å®ç°Rancher+Helm3 + ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–°çš„æ–¹å¼è¯¦è§£","keywords":[""],"articleBody":" ç¯å¢ƒå‡†å¤‡ å®‰è£… Rancherï¼šåœ¨æ§åˆ¶å¹³é¢æœåŠ¡å™¨ä¸Šå®‰è£… Rancherï¼Œå¯ä»¥é€šè¿‡å®¹å™¨æ–¹å¼å®‰è£…ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ Docker è¿è¡Œ Rancher æœåŠ¡å™¨å®¹å™¨ï¼Œè¿è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š docker run -d --restart=unless -stopped -p 80:80 -p 443:443 rancher/rancher:latest é…ç½® Kubernetes é›†ç¾¤æ¥å…¥ Rancherï¼šå¯¹äºè¦ç®¡ç†çš„æ¯ä¸ª Kubernetes é›†ç¾¤ï¼Œè·å–é›†ç¾¤çš„ Kube - config æ–‡ä»¶ç­‰ä¿¡æ¯ï¼Œç„¶ååœ¨ Rancher ç•Œé¢ä¸­å°†é›†ç¾¤æ·»åŠ è¿›æ¥ã€‚ å®‰è£… Helm 3ï¼šåœ¨å¯ä»¥è®¿é—® Kubernetes é›†ç¾¤çš„æœºå™¨ä¸Šå®‰è£… Helm 3ï¼Œå…·ä½“å®‰è£…æ­¥éª¤æ ¹æ®æ“ä½œç³»ç»Ÿä¸åŒè€Œä¸åŒã€‚ä¾‹å¦‚ï¼Œåœ¨ Linux ç³»ç»Ÿä¸Šï¼Œå¯ä»¥ä½¿ç”¨å®˜æ–¹æä¾›çš„è„šæœ¬å®‰è£…ï¼š curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get -helm -3.sh chmod 700 get_helm.sh ./get_helm.sh ä½¿ç”¨ Helm 3 éƒ¨ç½²åº”ç”¨å¹¶å…³è” ConfigMapï¼ˆä»¥ä¸€ä¸ªç®€å•çš„ Web åº”ç”¨ä¸ºä¾‹ï¼‰ åˆ›å»º Helm Chartï¼š é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ Helm Chart ç›®å½•ç»“æ„ã€‚å¯ä»¥ä½¿ç”¨helm create my - web - appå‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªåä¸ºmy - web - appçš„åŸºæœ¬ Chart æ¨¡æ¿ã€‚ åœ¨values.yamlæ–‡ä»¶ä¸­å®šä¹‰åº”ç”¨çš„é…ç½®å‚æ•°ï¼Œä¾‹å¦‚ï¼š app: config: port: 8080 db - connection - string: \"jdbc:mysql://localhost:3306/mydb\" åœ¨templatesç›®å½•ä¸‹åˆ›å»ºconfigmap.yamlæ–‡ä»¶æ¥å®šä¹‰ ConfigMapï¼Œå†…å®¹å¦‚ä¸‹ï¼š apiVersion: v1 kind: ConfigMap metadata: name: {{.Release.Name}} - config - map data: app - port: \"{{.Values.app.config.port}}\" db - connection - string: \"{{.Values.app.config.db - connection - string}}\" åœ¨templatesç›®å½•ä¸‹çš„deployment.yamlæ–‡ä»¶ä¸­ï¼ŒæŒ‚è½½ ConfigMap åˆ°å®¹å™¨ä¸­ã€‚ä¿®æ”¹volumeså’ŒvolumeMountséƒ¨åˆ†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š apiVersion: apps/v1 kind: Deployment metadata: name: {{.Release.Name}} - deployment spec: replicas: 1 selector: matchLabels: app: {{.Release.Name}} template: metadata: labels: app: {{.Release.Name}} spec: containers: - name: my - web - app - container image: my - web - app - image:latest ports: - containerPort: {{.Values.app.config.port}} volumeMounts: - name: config - volume mountPath: /app/config volumes: - name: config - volume configMap: name: {{.Release.Name}} - config - map éƒ¨ç½²åº”ç”¨åˆ°å¤šé›†ç¾¤ï¼š ä½¿ç”¨ Helm 3 å°†åº”ç”¨éƒ¨ç½²åˆ° Rancher ç®¡ç†çš„å¤šä¸ª Kubernetes é›†ç¾¤ã€‚ä¾‹å¦‚ï¼Œåœ¨æ¯ä¸ªé›†ç¾¤å¯¹åº”çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š helm install my - web - app my - web - app - chart - path -n my - namespace è¿™æ ·å°±å°†åº”ç”¨éƒ¨ç½²åˆ°äº†å¤šä¸ªé›†ç¾¤ä¸­ï¼Œå¹¶ä¸”æ¯ä¸ªé›†ç¾¤ä¸­çš„åº”ç”¨éƒ½å…³è”äº†ä¸€ä¸ª ConfigMapï¼Œå…¶ä¸­åŒ…å«åº”ç”¨çš„é…ç½®ä¿¡æ¯ã€‚ å®ç° ConfigMap çƒ­æ›´æ–° æ›´æ–° ConfigMap å†…å®¹ï¼š åœ¨ Rancher ç•Œé¢ä¸­ï¼Œæ‰¾åˆ°å¯¹åº”çš„ ConfigMap èµ„æºï¼ˆå¯ä»¥é€šè¿‡å‘½åç©ºé—´å’Œåç§°æ¥æŸ¥æ‰¾ï¼‰ï¼Œæˆ–è€…é€šè¿‡ Kubernetes å‘½ä»¤è¡Œkubectl edit configmap my - web - app - config - map -n my - namespaceæ¥ç¼–è¾‘ ConfigMap çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œä¿®æ”¹app - portçš„å€¼ä¸º8081ã€‚ ä½¿åº”ç”¨æ„ŸçŸ¥ ConfigMap æ›´æ–°ï¼ˆä»¥æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨ä¸ºä¾‹ï¼‰ï¼š å¯¹äºæ”¯æŒçƒ­é‡è½½é…ç½®æ–‡ä»¶çš„åº”ç”¨ï¼Œåº”ç”¨å†…éƒ¨éœ€è¦æœ‰ç›¸åº”çš„æœºåˆ¶æ¥ç›‘å¬é…ç½®æ–‡ä»¶çš„å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œä¸€äº›åŸºäº Spring Boot çš„ Java åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡é…ç½®spring - cloud - config - monitoræ¥å®ç°é…ç½®æ–‡ä»¶çš„çƒ­é‡è½½ã€‚åœ¨åº”ç”¨ä»£ç ä¸­ï¼Œéœ€è¦è¯»å–æŒ‚è½½çš„ ConfigMap ä¸­çš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸‹çš„é…ç½®å†…å®¹ï¼Œå¹¶ä¸”åœ¨æ–‡ä»¶å˜åŒ–æ—¶é‡æ–°åŠ è½½é…ç½®ã€‚ å¯¹äºä¸æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨ï¼š å¯ä»¥é€šè¿‡æ›´æ–°åº”ç”¨çš„ Deployment æ¥è§¦å‘å®¹å™¨çš„é‡æ–°åˆ›å»ºã€‚ä¾‹å¦‚ï¼Œé€šè¿‡ä¿®æ”¹ Deployment çš„annotationsæˆ–è€…labelsç­‰å…ƒæ•°æ®ä¿¡æ¯ï¼Œä½¿å¾— Deployment è§¦å‘æ»šåŠ¨æ›´æ–°ã€‚å¯ä»¥ä½¿ç”¨kubectl patch deployment my - web - app - deployment -n my - namespace -p '{\"spec\":{\"template\":{\"metadata\":{\"annotations\":{\"date\":\"'$(date +%s)'\"}}}}}'å‘½ä»¤æ¥æ›´æ–° Deployment çš„å…ƒæ•°æ®ï¼Œä»è€Œè§¦å‘æ»šåŠ¨æ›´æ–°ï¼Œè®©å®¹å™¨é‡æ–°åŠ è½½æ–°çš„ ConfigMap é…ç½®ã€‚ è·¨é›†ç¾¤åŒæ­¥å’Œç›‘æ§æ›´æ–°è¿‡ç¨‹ åœ¨ Rancher ä¸­åŒæ­¥æ›´æ–°ï¼š Rancher æä¾›äº†é›†ç¾¤ç»„å’Œå…¨å±€èµ„æºçš„åŠŸèƒ½ã€‚å¯ä»¥å°†å¤šä¸ªé›†ç¾¤ç»„æˆä¸€ä¸ªé›†ç¾¤ç»„ï¼Œç„¶åé€šè¿‡é›†ç¾¤ç»„æ¥åŒæ­¥æŸäº›èµ„æºçš„æ›´æ–°ã€‚å¯¹äº ConfigMapï¼Œå¯ä»¥å°è¯•å°†å…¶å®šä¹‰ä¸ºé›†ç¾¤ç»„çš„å…±äº«èµ„æºï¼ˆéƒ¨åˆ†é«˜çº§ç‰ˆæœ¬åŠŸèƒ½æ”¯æŒï¼‰ï¼Œè¿™æ ·åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­æ›´æ–° ConfigMap åï¼ŒRancher å¯ä»¥è¾…åŠ©å°†æ›´æ–°åŒæ­¥åˆ°å…¶ä»–é›†ç¾¤ã€‚ ç›‘æ§æ›´æ–°çŠ¶æ€ï¼š åœ¨ Rancher ç•Œé¢ä¸­ï¼Œåˆ©ç”¨å…¶å†…ç½®çš„ç›‘æ§å’Œå‘Šè­¦åŠŸèƒ½ï¼Œç›‘æ§åº”ç”¨åœ¨å„ä¸ªé›†ç¾¤ä¸­çš„æ›´æ–°è¿‡ç¨‹ã€‚å¯ä»¥æŸ¥çœ‹åº”ç”¨çš„ Pod çŠ¶æ€ã€èµ„æºä½¿ç”¨æƒ…å†µç­‰æŒ‡æ ‡ã€‚åŒæ—¶ï¼Œè®¾ç½®å‘Šè­¦è§„åˆ™ï¼Œä¾‹å¦‚å½“åº”ç”¨çš„æ›´æ–°å¤±è´¥æˆ–è€…å‡ºç°å¤§é‡ Pod å¼‚å¸¸æ—¶ï¼ŒåŠæ—¶æ”¶åˆ°é€šçŸ¥ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ Kubernetes åŸç”Ÿçš„ç›‘æ§å·¥å…·ï¼ˆå¦‚ Prometheus é›†æˆåˆ° Rancherï¼‰æ¥æ·±å…¥ç›‘æ§åº”ç”¨çš„æ›´æ–°è¿‡ç¨‹å’Œé…ç½®ç”Ÿæ•ˆæƒ…å†µã€‚ ","wordCount":"1392","inLanguage":"zh","datePublished":"2024-01-26T15:55:23+08:00","dateModified":"2024-01-26T15:55:23+08:00","author":[{"@type":"Person","name":"GopherDing"}],"mainEntityOfPage":{"@type":"WebPage","@id":"https://gopherding.github.io/posts/tech/rancher+helm3+-configmap%E9%9B%86%E7%BE%A4%E9%85%8D%E7%BD%AE%E9%A1%B9%E7%83%AD%E6%9B%B4%E6%96%B0/"},"publisher":{"@type":"Organization","name":"GopherDing's Blog","logo":{"@type":"ImageObject","url":"https://gopherding.github.io/img/GopherSpaceCommunity.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://gopherding.github.io/ accesskey=h title="GopherDing's Blog (Alt + H)"><img src=https://gopherding.github.io/img/GopherSpaceCommunity.png alt=logo aria-label=logo height=50>GopherDing's Blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)">
<svg id="moon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button><ul class=lang-switch><li>|</li></ul></div></div><ul id=menu><li><a href=https://gopherding.github.io/ title="ğŸ  ä¸»é¡µ"><span>ğŸ  ä¸»é¡µ</span></a></li><li><a href=https://gopherding.github.io/search title="ğŸ” æœç´¢ (Alt + /)" accesskey=/><span>ğŸ” æœç´¢</span></a></li><li><a href=https://gopherding.github.io/tags title="ğŸ§© æ ‡ç­¾"><span>ğŸ§© æ ‡ç­¾</span></a></li><li><a href=https://gopherding.github.io/archives/ title="â±ï¸ æ—¶é—´è½´"><span>â±ï¸ æ—¶é—´è½´</span></a></li><li><a href=https://gopherding.github.io/about title="ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº"><span>ğŸ™‹ğŸ»â€â™‚ï¸ å…³äº</span></a></li><li><a href=https://gopherding.github.io/links title="ğŸ¤ å‹é“¾"><span>ğŸ¤ å‹é“¾</span></a></li><li><a href=https://www.travellings.cn/go.html title="ğŸš‡ å¼€å¾€"><span>ğŸš‡ å¼€å¾€</span></a></li></ul></nav></header><main class="main page"><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}</style><article class=post-single><div id=single-content><header class=post-header><div class=breadcrumbs><a href=https://gopherding.github.io/>ğŸ  ä¸»é¡µ</a>&nbsp;Â»&nbsp;<a href=https://gopherding.github.io/posts/>ğŸ“šæ–‡ç« </a>&nbsp;Â»&nbsp;<a href=https://gopherding.github.io/posts/tech/>ğŸ‘¨ğŸ»â€ğŸ’» æŠ€æœ¯</a></div><h1 class=post-title>Rancher+Helm3 + ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–°</h1><div class=post-description>å®ç°Rancher+Helm3 + ConfigMapé›†ç¾¤é…ç½®é¡¹çƒ­æ›´æ–°çš„æ–¹å¼è¯¦è§£</div><div class=post-meta><style>i[id*=post_meta_style]{display:flex;align-items:center;margin:0 0 10px}.parent-post-meta{display:flex;flex-wrap:wrap;opacity:.8}</style><span class=parent-post-meta><span id=post_meta_style_1><span class="fa fa-calendar-check-o"></span>
<span>2024-01-26
&nbsp;&nbsp;
</span></span><span id=post_meta_style_3><span class="fa fa-file-word-o"></span>
<span>1392å­—
&nbsp;&nbsp;
</span></span><span id=post_meta_style_4><span class="fa fa-clock-o"></span>
<span>3åˆ†é’Ÿ
&nbsp;&nbsp;
</span></span><span id=post_meta_style_5><span class="fa fa-user-o"></span>
<span>GopherDing
&nbsp;&nbsp;
</span></span><span id=post_meta_style_6><span class="fa fa-tags" style=opacity:.8></span>
<span><span class=post-tags-meta><a href=https://gopherding.github.io/tags/kubernetes/ style="color:var(--secondary) !important">Kubernetes</a>
&nbsp;<a href=https://gopherding.github.io/tags/%E8%BF%90%E7%BB%B4/ style="color:var(--secondary) !important">è¿ç»´</a>
</span></span></span></span><span style=opacity:.8><span id=post_meta_style_7>&nbsp;&nbsp;
<span class="fa fa-eye"></span>
<span><span id=busuanzi_container_page_pv><span id=busuanzi_value_page_pv></span></span>
&nbsp;&nbsp;
</span></span><span id=post_meta_style_8><span class="fa fa-commenting-o"></span>
<span><script>window.addEventListener("load",function(){let t=document.documentURI,n="https://gopherding.github.io/",s=t.split(n),e=s[1];e[0]!=="/"&&(e="/"+e),twikoo.getCommentsCount({envId:null,region:null,urls:[e],includeReply:!1}).then(function(e){let t=e[0].count;const n=document.getElementById("comment_count");n.innerText=t}).catch(function(e){console.error(e)})})</script><span id=comment_count></span></span></span></span></div></header><aside id=toc-container class="toc-container wide"><div class=toc><details open><summary accesskey=c title="(Alt + C)"><span class=details>ç›®å½•</span></summary><div class=inner><ul><li><a href=#%e7%8e%af%e5%a2%83%e5%87%86%e5%a4%87 aria-label=ç¯å¢ƒå‡†å¤‡><strong>ç¯å¢ƒå‡†å¤‡</strong></a></li><li><a href=#%e4%bd%bf%e7%94%a8-helm-3-%e9%83%a8%e7%bd%b2%e5%ba%94%e7%94%a8%e5%b9%b6%e5%85%b3%e8%81%94-configmap%e4%bb%a5%e4%b8%80%e4%b8%aa%e7%ae%80%e5%8d%95%e7%9a%84-web-%e5%ba%94%e7%94%a8%e4%b8%ba%e4%be%8b aria-label="ä½¿ç”¨ Helm 3 éƒ¨ç½²åº”ç”¨å¹¶å…³è” ConfigMapï¼ˆä»¥ä¸€ä¸ªç®€å•çš„ Web åº”ç”¨ä¸ºä¾‹ï¼‰"><strong>ä½¿ç”¨ Helm 3 éƒ¨ç½²åº”ç”¨å¹¶å…³è” ConfigMap</strong>ï¼ˆä»¥ä¸€ä¸ªç®€å•çš„ Web åº”ç”¨ä¸ºä¾‹ï¼‰</a></li><li><a href=#%e5%ae%9e%e7%8e%b0-configmap-%e7%83%ad%e6%9b%b4%e6%96%b0 aria-label="å®ç° ConfigMap çƒ­æ›´æ–°"><strong>å®ç° ConfigMap çƒ­æ›´æ–°</strong></a><ul><li><a href=#%e6%9b%b4%e6%96%b0-configmap-%e5%86%85%e5%ae%b9 aria-label="æ›´æ–° ConfigMap å†…å®¹ï¼š">æ›´æ–° ConfigMap å†…å®¹ï¼š</a></li><li><a href=#%e4%bd%bf%e5%ba%94%e7%94%a8%e6%84%9f%e7%9f%a5-configmap-%e6%9b%b4%e6%96%b0%e4%bb%a5%e6%94%af%e6%8c%81%e7%83%ad%e9%87%8d%e8%bd%bd%e7%9a%84%e5%ba%94%e7%94%a8%e4%b8%ba%e4%be%8b aria-label="ä½¿åº”ç”¨æ„ŸçŸ¥ ConfigMap æ›´æ–°ï¼ˆä»¥æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨ä¸ºä¾‹ï¼‰ï¼š">ä½¿åº”ç”¨æ„ŸçŸ¥ ConfigMap æ›´æ–°ï¼ˆä»¥æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨ä¸ºä¾‹ï¼‰ï¼š</a></li><li><a href=#%e5%af%b9%e4%ba%8e%e4%b8%8d%e6%94%af%e6%8c%81%e7%83%ad%e9%87%8d%e8%bd%bd%e7%9a%84%e5%ba%94%e7%94%a8 aria-label=å¯¹äºä¸æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨ï¼š>å¯¹äºä¸æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨ï¼š</a></li></ul></li><li><a href=#%e8%b7%a8%e9%9b%86%e7%be%a4%e5%90%8c%e6%ad%a5%e5%92%8c%e7%9b%91%e6%8e%a7%e6%9b%b4%e6%96%b0%e8%bf%87%e7%a8%8b aria-label=è·¨é›†ç¾¤åŒæ­¥å’Œç›‘æ§æ›´æ–°è¿‡ç¨‹><strong>è·¨é›†ç¾¤åŒæ­¥å’Œç›‘æ§æ›´æ–°è¿‡ç¨‹</strong></a><ul><li><a href=#%e5%9c%a8-rancher-%e4%b8%ad%e5%90%8c%e6%ad%a5%e6%9b%b4%e6%96%b0 aria-label="åœ¨ Rancher ä¸­åŒæ­¥æ›´æ–°ï¼š">åœ¨ Rancher ä¸­åŒæ­¥æ›´æ–°ï¼š</a></li><li><a href=#%e7%9b%91%e6%8e%a7%e6%9b%b4%e6%96%b0%e7%8a%b6%e6%80%81 aria-label=ç›‘æ§æ›´æ–°çŠ¶æ€ï¼š>ç›‘æ§æ›´æ–°çŠ¶æ€ï¼š</a></li></ul></li></ul></div></details></div></aside><script>let activeElement,elements;window.addEventListener("DOMContentLoaded",function(){checkTocPosition(),elements=document.querySelectorAll("h1[id],h2[id],h3[id],h4[id],h5[id],h6[id]"),activeElement=elements[0];const t=encodeURI(activeElement.getAttribute("id")).toLowerCase();document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active")},!1),window.addEventListener("resize",function(){checkTocPosition()},!1),window.addEventListener("scroll",()=>{elements&&(activeElement=Array.from(elements).find(e=>{if(getOffsetTop(e)-window.pageYOffset>0&&getOffsetTop(e)-window.pageYOffset<window.innerHeight/2)return e})||activeElement,elements.forEach(e=>{const t=encodeURI(e.getAttribute("id")).toLowerCase();e===activeElement?document.querySelector(`.inner ul li a[href="#${t}"]`).classList.add("active"):document.querySelector(`.inner ul li a[href="#${t}"]`).classList.remove("active")}))},!1);const main=parseInt(getComputedStyle(document.body).getPropertyValue("--article-width"),10),toc=parseInt(getComputedStyle(document.body).getPropertyValue("--toc-width"),10),gap=parseInt(getComputedStyle(document.body).getPropertyValue("--gap"),10);function checkTocPosition(){const e=document.body.scrollWidth;e-main-toc*2-gap*4>0?document.getElementById("toc-container").classList.add("wide"):document.getElementById("toc-container").classList.remove("wide")}function getOffsetTop(e){if(!e.getClientRects().length)return 0;let t=e.getBoundingClientRect(),n=e.ownerDocument.defaultView;return t.top+n.pageYOffset}</script><div class=post-content><ol><li><h3 id=ç¯å¢ƒå‡†å¤‡><strong>ç¯å¢ƒå‡†å¤‡</strong><a hidden class=anchor aria-hidden=true href=#ç¯å¢ƒå‡†å¤‡>#</a></h3><ul><li><strong>å®‰è£… Rancher</strong>ï¼šåœ¨æ§åˆ¶å¹³é¢æœåŠ¡å™¨ä¸Šå®‰è£… Rancherï¼Œå¯ä»¥é€šè¿‡å®¹å™¨æ–¹å¼å®‰è£…ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ Docker è¿è¡Œ Rancher æœåŠ¡å™¨å®¹å™¨ï¼Œè¿è¡Œå‘½ä»¤å¦‚ä¸‹ï¼š</li></ul></li></ol><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>docker run -d --restart<span style=color:#f92672>=</span>unless -stopped -p 80:80 -p 443:443 rancher/rancher:latest
</span></span></code></pre></div><ul><li><strong>é…ç½® Kubernetes é›†ç¾¤æ¥å…¥ Rancher</strong>ï¼šå¯¹äºè¦ç®¡ç†çš„æ¯ä¸ª Kubernetes é›†ç¾¤ï¼Œè·å–é›†ç¾¤çš„ Kube - config æ–‡ä»¶ç­‰ä¿¡æ¯ï¼Œç„¶ååœ¨ Rancher ç•Œé¢ä¸­å°†é›†ç¾¤æ·»åŠ è¿›æ¥ã€‚</li><li><strong>å®‰è£… Helm 3</strong>ï¼šåœ¨å¯ä»¥è®¿é—® Kubernetes é›†ç¾¤çš„æœºå™¨ä¸Šå®‰è£… Helm 3ï¼Œå…·ä½“å®‰è£…æ­¥éª¤æ ¹æ®æ“ä½œç³»ç»Ÿä¸åŒè€Œä¸åŒã€‚ä¾‹å¦‚ï¼Œåœ¨ Linux ç³»ç»Ÿä¸Šï¼Œå¯ä»¥ä½¿ç”¨å®˜æ–¹æä¾›çš„è„šæœ¬å®‰è£…ï¼š</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>     curl -fsSL -o get_helm.sh https://raw.githubusercontent.com/helm/helm/master/scripts/get -helm -3.sh
</span></span><span style=display:flex><span>     chmod <span style=color:#ae81ff>700</span> get_helm.sh
</span></span><span style=display:flex><span>    ./get_helm.sh
</span></span></code></pre></div><ol start=2><li><h3 id=ä½¿ç”¨-helm-3-éƒ¨ç½²åº”ç”¨å¹¶å…³è”-configmapä»¥ä¸€ä¸ªç®€å•çš„-web-åº”ç”¨ä¸ºä¾‹><strong>ä½¿ç”¨ Helm 3 éƒ¨ç½²åº”ç”¨å¹¶å…³è” ConfigMap</strong>ï¼ˆä»¥ä¸€ä¸ªç®€å•çš„ Web åº”ç”¨ä¸ºä¾‹ï¼‰<a hidden class=anchor aria-hidden=true href=#ä½¿ç”¨-helm-3-éƒ¨ç½²åº”ç”¨å¹¶å…³è”-configmapä»¥ä¸€ä¸ªç®€å•çš„-web-åº”ç”¨ä¸ºä¾‹>#</a></h3></li></ol><ul><li>åˆ›å»º Helm Chartï¼š<ul><li>é¦–å…ˆåˆ›å»ºä¸€ä¸ªæ–°çš„ Helm Chart ç›®å½•ç»“æ„ã€‚å¯ä»¥ä½¿ç”¨<code>helm create my - web - app</code>å‘½ä»¤æ¥åˆ›å»ºä¸€ä¸ªåä¸º<code>my - web - app</code>çš„åŸºæœ¬ Chart æ¨¡æ¿ã€‚</li><li>åœ¨<code>values.yaml</code>æ–‡ä»¶ä¸­å®šä¹‰åº”ç”¨çš„é…ç½®å‚æ•°ï¼Œä¾‹å¦‚ï¼š</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>       <span style=color:#f92672>app</span>:
</span></span><span style=display:flex><span>         <span style=color:#f92672>config</span>:
</span></span><span style=display:flex><span>           <span style=color:#f92672>port</span>: <span style=color:#ae81ff>8080</span>
</span></span><span style=display:flex><span>           <span style=color:#f92672>db - connection - string</span>: <span style=color:#e6db74>&#34;jdbc:mysql://localhost:3306/mydb&#34;</span>
</span></span></code></pre></div><ul><li>åœ¨<code>templates</code>ç›®å½•ä¸‹åˆ›å»º<code>configmap.yaml</code>æ–‡ä»¶æ¥å®šä¹‰ ConfigMapï¼Œå†…å®¹å¦‚ä¸‹ï¼š</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>       <span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>v1</span>
</span></span><span style=display:flex><span>       <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>ConfigMap</span>
</span></span><span style=display:flex><span>       <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>         <span style=color:#f92672>name</span>: {{<span style=color:#ae81ff>.Release.Name}} - config - map</span>
</span></span><span style=display:flex><span>       <span style=color:#f92672>data</span>:
</span></span><span style=display:flex><span>         <span style=color:#f92672>app - port</span>: <span style=color:#e6db74>&#34;{{.Values.app.config.port}}&#34;</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>db - connection - string</span>: <span style=color:#e6db74>&#34;{{.Values.app.config.db - connection - string}}&#34;</span>
</span></span></code></pre></div><ul><li>åœ¨<code>templates</code>ç›®å½•ä¸‹çš„<code>deployment.yaml</code>æ–‡ä»¶ä¸­ï¼ŒæŒ‚è½½ ConfigMap åˆ°å®¹å™¨ä¸­ã€‚ä¿®æ”¹<code>volumes</code>å’Œ<code>volumeMounts</code>éƒ¨åˆ†ï¼Œç¤ºä¾‹å¦‚ä¸‹ï¼š</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=display:flex><span>       <span style=color:#f92672>apiVersion</span>: <span style=color:#ae81ff>apps/v1</span>
</span></span><span style=display:flex><span>       <span style=color:#f92672>kind</span>: <span style=color:#ae81ff>Deployment</span>
</span></span><span style=display:flex><span>       <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>         <span style=color:#f92672>name</span>: {{<span style=color:#ae81ff>.Release.Name}} - deployment</span>
</span></span><span style=display:flex><span>       <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>         <span style=color:#f92672>replicas</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>selector</span>:
</span></span><span style=display:flex><span>           <span style=color:#f92672>matchLabels</span>:
</span></span><span style=display:flex><span>             <span style=color:#f92672>app</span>: {{<span style=color:#ae81ff>.Release.Name}}</span>
</span></span><span style=display:flex><span>         <span style=color:#f92672>template</span>:
</span></span><span style=display:flex><span>           <span style=color:#f92672>metadata</span>:
</span></span><span style=display:flex><span>             <span style=color:#f92672>labels</span>:
</span></span><span style=display:flex><span>               <span style=color:#f92672>app</span>: {{<span style=color:#ae81ff>.Release.Name}}</span>
</span></span><span style=display:flex><span>           <span style=color:#f92672>spec</span>:
</span></span><span style=display:flex><span>             <span style=color:#f92672>containers</span>:
</span></span><span style=display:flex><span>             - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>my - web - app - container</span>
</span></span><span style=display:flex><span>               <span style=color:#f92672>image</span>: <span style=color:#ae81ff>my - web - app - image:latest</span>
</span></span><span style=display:flex><span>               <span style=color:#f92672>ports</span>:
</span></span><span style=display:flex><span>               - <span style=color:#f92672>containerPort</span>: {{<span style=color:#ae81ff>.Values.app.config.port}}</span>
</span></span><span style=display:flex><span>               <span style=color:#f92672>volumeMounts</span>:
</span></span><span style=display:flex><span>               - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>config - volume</span>
</span></span><span style=display:flex><span>                 <span style=color:#f92672>mountPath</span>: <span style=color:#ae81ff>/app/config</span>
</span></span><span style=display:flex><span>             <span style=color:#f92672>volumes</span>:
</span></span><span style=display:flex><span>             - <span style=color:#f92672>name</span>: <span style=color:#ae81ff>config - volume</span>
</span></span><span style=display:flex><span>               <span style=color:#f92672>configMap</span>:
</span></span><span style=display:flex><span>                 <span style=color:#f92672>name</span>: {{<span style=color:#ae81ff>.Release.Name}} - config - map</span>
</span></span></code></pre></div><ul><li>éƒ¨ç½²åº”ç”¨åˆ°å¤šé›†ç¾¤ï¼š<ul><li>ä½¿ç”¨ Helm 3 å°†åº”ç”¨éƒ¨ç½²åˆ° Rancher ç®¡ç†çš„å¤šä¸ª Kubernetes é›†ç¾¤ã€‚ä¾‹å¦‚ï¼Œåœ¨æ¯ä¸ªé›†ç¾¤å¯¹åº”çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿è¡Œä»¥ä¸‹å‘½ä»¤ï¼š</li></ul></li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>       helm install my - web - app my - web - app - chart - path -n my - namespace
</span></span></code></pre></div><ul><li>è¿™æ ·å°±å°†åº”ç”¨éƒ¨ç½²åˆ°äº†å¤šä¸ªé›†ç¾¤ä¸­ï¼Œå¹¶ä¸”æ¯ä¸ªé›†ç¾¤ä¸­çš„åº”ç”¨éƒ½å…³è”äº†ä¸€ä¸ª ConfigMapï¼Œå…¶ä¸­åŒ…å«åº”ç”¨çš„é…ç½®ä¿¡æ¯ã€‚</li></ul><ol start=3><li><h3 id=å®ç°-configmap-çƒ­æ›´æ–°><strong>å®ç° ConfigMap çƒ­æ›´æ–°</strong><a hidden class=anchor aria-hidden=true href=#å®ç°-configmap-çƒ­æ›´æ–°>#</a></h3></li></ol><ul><li><h4 id=æ›´æ–°-configmap-å†…å®¹>æ›´æ–° ConfigMap å†…å®¹ï¼š<a hidden class=anchor aria-hidden=true href=#æ›´æ–°-configmap-å†…å®¹>#</a></h4><ul><li>åœ¨ Rancher ç•Œé¢ä¸­ï¼Œæ‰¾åˆ°å¯¹åº”çš„ ConfigMap èµ„æºï¼ˆå¯ä»¥é€šè¿‡å‘½åç©ºé—´å’Œåç§°æ¥æŸ¥æ‰¾ï¼‰ï¼Œæˆ–è€…é€šè¿‡ Kubernetes å‘½ä»¤è¡Œ<code>kubectl edit configmap my - web - app - config - map -n my - namespace</code>æ¥ç¼–è¾‘ ConfigMap çš„å†…å®¹ã€‚ä¾‹å¦‚ï¼Œä¿®æ”¹<code>app - port</code>çš„å€¼ä¸º<code>8081</code>ã€‚</li></ul></li><li><h4 id=ä½¿åº”ç”¨æ„ŸçŸ¥-configmap-æ›´æ–°ä»¥æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨ä¸ºä¾‹>ä½¿åº”ç”¨æ„ŸçŸ¥ ConfigMap æ›´æ–°ï¼ˆä»¥æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨ä¸ºä¾‹ï¼‰ï¼š<a hidden class=anchor aria-hidden=true href=#ä½¿åº”ç”¨æ„ŸçŸ¥-configmap-æ›´æ–°ä»¥æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨ä¸ºä¾‹>#</a></h4><ul><li>å¯¹äºæ”¯æŒçƒ­é‡è½½é…ç½®æ–‡ä»¶çš„åº”ç”¨ï¼Œåº”ç”¨å†…éƒ¨éœ€è¦æœ‰ç›¸åº”çš„æœºåˆ¶æ¥ç›‘å¬é…ç½®æ–‡ä»¶çš„å˜åŒ–ã€‚ä¾‹å¦‚ï¼Œä¸€äº›åŸºäº Spring Boot çš„ Java åº”ç”¨ï¼Œå¯ä»¥é€šè¿‡é…ç½®<code>spring - cloud - config - monitor</code>æ¥å®ç°é…ç½®æ–‡ä»¶çš„çƒ­é‡è½½ã€‚åœ¨åº”ç”¨ä»£ç ä¸­ï¼Œéœ€è¦è¯»å–æŒ‚è½½çš„ ConfigMap ä¸­çš„é…ç½®æ–‡ä»¶è·¯å¾„ä¸‹çš„é…ç½®å†…å®¹ï¼Œå¹¶ä¸”åœ¨æ–‡ä»¶å˜åŒ–æ—¶é‡æ–°åŠ è½½é…ç½®ã€‚</li></ul></li><li><h4 id=å¯¹äºä¸æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨>å¯¹äºä¸æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨ï¼š<a hidden class=anchor aria-hidden=true href=#å¯¹äºä¸æ”¯æŒçƒ­é‡è½½çš„åº”ç”¨>#</a></h4><ul><li>å¯ä»¥é€šè¿‡æ›´æ–°åº”ç”¨çš„ Deployment æ¥è§¦å‘å®¹å™¨çš„é‡æ–°åˆ›å»ºã€‚ä¾‹å¦‚ï¼Œé€šè¿‡ä¿®æ”¹ Deployment çš„<code>annotations</code>æˆ–è€…<code>labels</code>ç­‰å…ƒæ•°æ®ä¿¡æ¯ï¼Œä½¿å¾— Deployment è§¦å‘æ»šåŠ¨æ›´æ–°ã€‚å¯ä»¥ä½¿ç”¨<code>kubectl patch deployment my - web - app - deployment -n my - namespace -p '{"spec":{"template":{"metadata":{"annotations":{"date":"'$(date +%s)'"}}}}}'</code>å‘½ä»¤æ¥æ›´æ–° Deployment çš„å…ƒæ•°æ®ï¼Œä»è€Œè§¦å‘æ»šåŠ¨æ›´æ–°ï¼Œè®©å®¹å™¨é‡æ–°åŠ è½½æ–°çš„ ConfigMap é…ç½®ã€‚</li></ul></li></ul><ol start=4><li><h3 id=è·¨é›†ç¾¤åŒæ­¥å’Œç›‘æ§æ›´æ–°è¿‡ç¨‹><strong>è·¨é›†ç¾¤åŒæ­¥å’Œç›‘æ§æ›´æ–°è¿‡ç¨‹</strong><a hidden class=anchor aria-hidden=true href=#è·¨é›†ç¾¤åŒæ­¥å’Œç›‘æ§æ›´æ–°è¿‡ç¨‹>#</a></h3></li></ol><ul><li><h4 id=åœ¨-rancher-ä¸­åŒæ­¥æ›´æ–°>åœ¨ Rancher ä¸­åŒæ­¥æ›´æ–°ï¼š<a hidden class=anchor aria-hidden=true href=#åœ¨-rancher-ä¸­åŒæ­¥æ›´æ–°>#</a></h4><ul><li>Rancher æä¾›äº†é›†ç¾¤ç»„å’Œå…¨å±€èµ„æºçš„åŠŸèƒ½ã€‚å¯ä»¥å°†å¤šä¸ªé›†ç¾¤ç»„æˆä¸€ä¸ªé›†ç¾¤ç»„ï¼Œç„¶åé€šè¿‡é›†ç¾¤ç»„æ¥åŒæ­¥æŸäº›èµ„æºçš„æ›´æ–°ã€‚å¯¹äº ConfigMapï¼Œå¯ä»¥å°è¯•å°†å…¶å®šä¹‰ä¸ºé›†ç¾¤ç»„çš„å…±äº«èµ„æºï¼ˆéƒ¨åˆ†é«˜çº§ç‰ˆæœ¬åŠŸèƒ½æ”¯æŒï¼‰ï¼Œè¿™æ ·åœ¨ä¸€ä¸ªé›†ç¾¤ä¸­æ›´æ–° ConfigMap åï¼ŒRancher å¯ä»¥è¾…åŠ©å°†æ›´æ–°åŒæ­¥åˆ°å…¶ä»–é›†ç¾¤ã€‚</li></ul></li><li><h4 id=ç›‘æ§æ›´æ–°çŠ¶æ€>ç›‘æ§æ›´æ–°çŠ¶æ€ï¼š<a hidden class=anchor aria-hidden=true href=#ç›‘æ§æ›´æ–°çŠ¶æ€>#</a></h4><ul><li>åœ¨ Rancher ç•Œé¢ä¸­ï¼Œåˆ©ç”¨å…¶å†…ç½®çš„ç›‘æ§å’Œå‘Šè­¦åŠŸèƒ½ï¼Œç›‘æ§åº”ç”¨åœ¨å„ä¸ªé›†ç¾¤ä¸­çš„æ›´æ–°è¿‡ç¨‹ã€‚å¯ä»¥æŸ¥çœ‹åº”ç”¨çš„ Pod çŠ¶æ€ã€èµ„æºä½¿ç”¨æƒ…å†µç­‰æŒ‡æ ‡ã€‚åŒæ—¶ï¼Œè®¾ç½®å‘Šè­¦è§„åˆ™ï¼Œä¾‹å¦‚å½“åº”ç”¨çš„æ›´æ–°å¤±è´¥æˆ–è€…å‡ºç°å¤§é‡ Pod å¼‚å¸¸æ—¶ï¼ŒåŠæ—¶æ”¶åˆ°é€šçŸ¥ã€‚ä¹Ÿå¯ä»¥é€šè¿‡ Kubernetes åŸç”Ÿçš„ç›‘æ§å·¥å…·ï¼ˆå¦‚ Prometheus é›†æˆåˆ° Rancherï¼‰æ¥æ·±å…¥ç›‘æ§åº”ç”¨çš„æ›´æ–°è¿‡ç¨‹å’Œé…ç½®ç”Ÿæ•ˆæƒ…å†µã€‚</li></ul></li></ul></div><footer class=post-footer><nav class=paginav><a class=prev href=https://gopherding.github.io/posts/tech/k8s%E9%92%88%E5%AF%B9pod%E8%B5%84%E6%BA%90%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%81%A5%E5%BA%B7%E7%9B%91%E6%B5%8B%E6%9C%BA%E5%88%B6/><span class=title>Â« ä¸Šä¸€é¡µ</span><br><span>K8sé’ˆå¯¹podèµ„æºå¯¹è±¡çš„å¥åº·ç›‘æµ‹æœºåˆ¶</span>
</a><a class=next href=https://gopherding.github.io/posts/tech/helm3%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95/><span class=title>ä¸‹ä¸€é¡µ Â»</span><br><span>Helm3çš„ä½¿ç”¨æ–¹æ³•</span></a></nav></footer></div><style>.comments_details summary::marker{font-size:20px;content:'ğŸ‘‰å±•å¼€è¯„è®º';color:var(--content)}.comments_details[open] summary::marker{font-size:20px;content:'ğŸ‘‡å…³é—­è¯„è®º';color:var(--content)}</style><div><details class=comments_details><summary style="cursor:pointer;margin:50px 0 20px;width:130px"><span style=font-size:20px;color:var(--content)>...</span></summary><div id=tcomment></div></details><script>window.addEventListener("load",function(){twikoo.init({envId:null,el:"#tcomment",lang:"zh-CN",region:null,path:window.TWIKOO_MAGIC_PATH||window.location.pathname})})</script></div></article></main><footer class=footer><span>Copyright
&copy;
2021-2026
<a href=https://gopherding.github.io/ style=color:#939393;text-decoration:none;border-bottom:none;box-shadow:none>GopherDing's Blog</a>
All Rights Reserved. Generated with
<a href=https://gohugo.io/ rel="nofollow noopener" target=_blank style=text-decoration:none;border-bottom:none;box-shadow:none>Hugo</a>
.Version 0.147.9.</span><br><span id=busuanzi_container><span class="fa fa-user"></span> <span id=busuanzi_value_site_uv></span>
<span class="fa fa-eye"></span> <span id=busuanzi_value_site_pv></span></span></footer><script src=/js/typewriter.js></script><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><span class=topInner><svg class="topSvg" viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
<span id=read_progress></span>
</span></a><script>document.addEventListener("scroll",function(){const t=document.getElementById("read_progress"),n=document.documentElement.scrollHeight,s=document.documentElement.clientHeight,o=document.documentElement.scrollTop||document.body.scrollTop;t.innerText=((o/(n-s)).toFixed(2)*100).toFixed(0)})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>let mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>200||document.documentElement.scrollTop>200?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.body.addEventListener("copy",function(e){if(window.getSelection().toString()&&window.getSelection().toString().length>100){let t=e.clipboardData||window.clipboardData;if(t){e.preventDefault();let n=window.getSelection().toString()+`\r

â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€ŒGopherDing's Blogã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚\r
åŸæ–‡é“¾æ¥ï¼š`+location.href,s=window.getSelection().toString()+`\r

â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€ŒGopherDing's Blogã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚\r
åŸæ–‡é“¾æ¥ï¼š`+location.href;t.setData("text/html",n),t.setData("text/plain",s)}}})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerText="å¤åˆ¶";function s(){t.innerText="å·²å¤åˆ¶ï¼",setTimeout(()=>{t.innerText="å¤åˆ¶"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){let t=e.textContent+`\r
â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r
ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºã€ŒGopherDing's Blogã€çš„åŸåˆ›æ–‡ç« ï¼Œéµå¾ªCC 4.0 BY-SAç‰ˆæƒåè®®ï¼Œè½¬è½½è¯·é™„ä¸ŠåŸæ–‡å‡ºå¤„é“¾æ¥åŠæœ¬å£°æ˜ã€‚\r
åŸæ–‡é“¾æ¥ï¼š`+location.href;navigator.clipboard.writeText(t),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>